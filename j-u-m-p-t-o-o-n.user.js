// ==UserScript==
// @name         j-u-m-p-t-o-o-n
// @namespace    j-u-m-p-t-o-o-n.user.js
// @version      2025.05.30
// @description  down j-u-m-p-t-o-o-n
// @author       You
// @include      /^https:\/\/j[u2]mpt[o0]on\.c[o0]m\/s[e3]ri[e3]s\/.+?\/[e3]pis[o0]des\//
// @icon         https://raw.githubusercontent.com/kawaguchishota7890/va_ngon_lau/main/j-u-m-p-t-o-o-n.png
// @require      https://unpkg.com/file-saver@2.0.5/dist/FileSaver.min.js
// @grant        GM_addElement
// @downloadURL  https://github.com/kawaguchishota7890/va_ngon_lau/raw/main/j-u-m-p-t-o-o-n.user.js
// @updateURL    https://github.com/kawaguchishota7890/va_ngon_lau/raw/main/j-u-m-p-t-o-o-n.meta.js
// ==/UserScript==

const a0P=a0O;function a0O(v,O){const H=a0v();return a0O=function(Y,z){Y=Y-0x161;let s=H[Y];if(a0O['wyQGzI']===undefined){var I=function(x){const i='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let F='',o='';for(let d=0x0,K,Q,r=0x0;Q=x['charAt'](r++);~Q&&(K=d%0x4?K*0x40+Q:Q,d++%0x4)?F+=String['fromCharCode'](0xff&K>>(-0x2*d&0x6)):0x0){Q=i['indexOf'](Q);}for(let D=0x0,Z=F['length'];D<Z;D++){o+='%'+('00'+F['charCodeAt'](D)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};const w=function(F,o){let d=[],K=0x0,Q,r='';F=I(F);let D;for(D=0x0;D<0x100;D++){d[D]=D;}for(D=0x0;D<0x100;D++){K=(K+d[D]+o['charCodeAt'](D%o['length']))%0x100,Q=d[D],d[D]=d[K],d[K]=Q;}D=0x0,K=0x0;for(let Z=0x0;Z<F['length'];Z++){D=(D+0x1)%0x100,K=(K+d[D])%0x100,Q=d[D],d[D]=d[K],d[K]=Q,r+=String['fromCharCode'](F['charCodeAt'](Z)^d[(d[D]+d[K])%0x100]);}return r;};a0O['EzdMNb']=w,v=arguments,a0O['wyQGzI']=!![];}const S=H[0x0],X=Y+S,N=v[X];return!N?(a0O['uyzGsu']===undefined&&(a0O['uyzGsu']=!![]),s=a0O['EzdMNb'](s,z),v[X]=s):s=N,s;},a0O(v,O);}(function(v,O){const y=a0O,H=v();while(!![]){try{const Y=parseInt(y(0x186,'Atv9'))/0x1+-parseInt(y(0x176,'1AG7'))/0x2+parseInt(y(0x1a0,'1AG7'))/0x3+parseInt(y(0x175,'9Moi'))/0x4+-parseInt(y(0x19b,'H2A0'))/0x5*(parseInt(y(0x191,'$v5j'))/0x6)+-parseInt(y(0x166,'7doI'))/0x7+-parseInt(y(0x19d,'aZLU'))/0x8*(-parseInt(y(0x1a1,'K2l^'))/0x9);if(Y===O)break;else H['push'](H['shift']());}catch(z){H['push'](H['shift']());}}}(a0v,0x63103));let downloading_current=0x0,downloading_total=0x0,div_status_box;function sleep(v){return new Promise(O=>setTimeout(O,v));}const ei=v=>({'next':()=>v=(0x19660d*v+0x3c6ef35f)%0x100000000}),et=(v,O,H)=>{const R=a0O;let Y=Array['from']({'length':O},(S,X)=>X),z=O;0x0!==H&&z--;let I=ei(v);for(let S=z;S>0x1;S--){let X=I[R(0x1a2,'Atv9')]()%S;[Y[X],Y[S-0x1]]=[Y[S-0x1],Y[X]];}return Y;},es=(v,O,H,Y,z)=>{const c=a0O,I={'V1':{'splitWidth':0xc,'paddingWidth':0x3,'blankWidth':0x3},'V2':{'splitWidth':0x14,'paddingWidth':0xf,'blankWidth':0x1}};let {splitWidth:S,blankWidth:X,paddingWidth:N}=I[O],w=S+X+0x2*N,x=Math[c(0x165,'(pLT')](Y/w),F=H%S,K=et(v,x,F),Q=Array[c(0x18b,'BE3W')]({'length':x}),D=[];for(let Z of K)Q[K[Z]]=Z;for(let k=0x0;k<x;k++){let C=Q[k]*w+N,M=k*S;D[c(0x161,'yG64')]([C,0x0,S,z,M,0x0,S,z]);}if(F){let f=x*w+N,A=x*S;D[c(0x164,'XFck')]([f,0x0,F,z,A,0x0,F,z]);}return D;},download_encrypted=async(v,O,H,Y)=>{const n=a0O,z=await fetch(v[n(0x16e,'DmLv')]),s=await z[n(0x199,'BE3W')](),I=window[n(0x198,'v$K]')]||window[n(0x162,'$v5j')],S=I['createObjectURL'](s),X=new Image();X['onload']=()=>{const B=n;let N=es(H,Y,Number[B(0x188,'&57E')](v[B(0x18d,'UTOC')]),X[B(0x190,'49KY')],X[B(0x195,'#m!n')]);const w=document['createElement']('canvas');w[B(0x194,'4CZ1')]=Number['parseInt'](v['width'],0xa),w[B(0x18e,'BE3W')]=Number[B(0x17c,'Jn5&')](v[B(0x172,'mfzK')],0xa);const x=w[B(0x16c,'&t()')]('2d');for(let F of N){x['drawImage'](X,...F);}w['toBlob'](o=>{const J=B;saveAs(o,(''+(O+0x1))['padStart'](0x3,'0')+J(0x177,'e%kr')),downloading_current+=0x1,update_status(),window['URL'][J(0x16f,'Atv9')](S);},B(0x16d,'H2A0'),0.99);},X[n(0x170,'XFck')]=S;};function update_status(){const u=a0O;div_status_box[u(0x19c,'Atv9')][u(0x183,'$v5j')]=u(0x19e,'oR#F'),div_status_box[u(0x197,'XFck')]=downloading_current+u(0x18f,'FLO4')+downloading_total;}function create_download_icon(){const j=a0O;let v=GM_addElement(document['querySelector'](j(0x17a,'PdZB')),j(0x171,'Jn5&'),{'className':j(0x17d,'vVpp'),'style':j(0x187,'(pLT')});const O=GM_addElement(v,j(0x168,'a8&t'),{'className':'tai-ve'}),H=GM_addElement(O,j(0x189,'XFck'),{'className':j(0x173,'bdA7')});return GM_addElement(H,j(0x193,'BE3W'),{'src':j(0x185,'1AG7'),'style':j(0x182,'zXBG')}),GM_addElement('link',{'rel':j(0x180,')vAv'),'href':'https://fonts.googleapis.com/css2?family=Acme&display=swap'}),div_status_box=GM_addElement(v,'div',{'className':j(0x17f,'$v5j'),'textContent':downloading_current+j(0x19f,'ck@A')+downloading_total,'style':j(0x184,'e%kr')}),v;}const throttlePromises=async(v,O)=>{const U=a0O;while(v[U(0x18c,')vAv')]>0x0){await Promise[U(0x17b,'K2l^')](v['splice'](0x0,O)[U(0x169,'MmLB')](H=>H())),await sleep(0xc8);}},ee=v=>v['split']('')[a0P(0x178,'Jn5&')]((O,H)=>O+H[a0P(0x17e,'ATCD')](0x0),0x0);function a0v(){const h=['W6VcUCo2ybC/W6hdV8oEFa','W6VcUmoTFWy+W6ddTmoC','x8oaW5zimb4XkrPCaw4qW6JdPSoyWPdcJrWxamk/W4/dPhbOWRep','W7q/WONcPSkJWQBdQW','W7NcR8o7amkwWPlcPqFcS8kwghWhW53cMKZcJH1iW6j9W6GKWPL1u8kPg8obfmoJtqWPWOtdV8k4bSkOdmohW6lcVJvhW4SRF8o7W4iHqdNdUv8+W67dOIbTWRaxW6pcKmkxW4fToYmraSkDW78llerxi8o4dCkHbCkFuSoJW4NdP8kRcKO6WPTJDY7cNSoEgaOmWOv/WOhcGmo5W53cUSoJWQmoC2WkWRVcKmoFWQv+pNOIxgpdG8oJdmoEAYpcICkCFCk7nSk1k8o3W6yhFIZcVSk6jJakW5G9ecuMoSk4mgVcN8kJwsdcVSkxWQBdVCkBW7ybWOGxWO/cImk7W5K2eLTWWPGQWOyTjCkQtdFcPWRcHwPkW48ZW6NdNapdMSkvWRTMWRdcNKZcVCoZqx5wmZPRW5/cRqBdLvtdLNtcGJBcLCojhb/dGNv6WR/dP17cTCocW4K1W6NcG8k+zCkdW4dcVSoJW4tcHLS2WPJdINZcQCo0WPxcTmoKW5hcJsFdRG','fGCKWOCelaJdH1zDod46W6eyW51/wdr5F8oqySoIWReCW6eEF2r2ySkAW6tdRLldNSoGW6HhW5VcIXldRSk8WQrtW7BcIaPMBalcJmoppZbxdSocW79gWRtcKSkseriGj8obb8kLWQi','AWZcJ2pdIw0PWRq8k8kEAa','WQHdW6pcPf7cK8kVF8o4W4BdOqNcJNNcKL/cISkZvmkLhCk8mSk4WRFdGCkPW4xdGXmQhmk8WPKfe8kIW4BdLSoPrbtdQ8o8q8k+W4XObXpdQtBcK8krldZdTSkhW7lcMCk2W5ldV8k0zSovWQiXrJNcOmk5WPjkrbugeYbSWQ4oWRddQ1GuB8kWW63cPX/dSCovsZhdJSkXWOJcHmoEkmksW4nVDf7cQq/dHSojrmoQs8oQW5ddO0lcImottCo1pCo4W5jQWOHEWO1YWPvetCkqkGZcPmohiKVcMLf+WRe8Exe1WO/dQHBcRCoBWPiIW47cK8o+z8k1WRu4','W4TrW7NdRNJcOhK9','FCkaWOy','W5VcNCoMuSo6W7nZbSkYn8kWzYVdVSkdWQi','k8kkvGC','W7tcQmoHAWyK','x8k4W5XDyW','jCkDua3cT1S','kmkVW7G','d8k9W61bBq','WQyWWPtcU8kmWPFdVG','WQ5UW7ldMcC','jmkvxG','WRHXWQLrWRC','WOFcMSo/W5dcVc8','ghP8oSo1WPtcSG','CmkhWP7dOmouW7XwW5LZ','W5fsyW','l8kuvGG','WQuqWOXnmmkhFmkzWQVcTLRdMHm','BCoHo8kfWONcUGhcJCo9WQDPWOC','kKRdGd7cMq','reKOE8kmoCopECkec8kt','W7ziW5OwBa','W6njiG','s0DKW4jbihBcUfnDgXq','W5Hsz1i+WQJcSmoLcmoy','n1VdGsy','WR13W6JdKW','W6CZWPJcVCkMWRpdH1xcTW','W7RcMG8HESo+W4hcMmkgEa','ACkCWOpdRq','WQPgW7/cU0a','xSoTwdhcOK4PW7VdS8o2fmk1WQi','WR7dIKXHCG','y8kmWQu','vg3cIG','WRuYhqVdSrhdHGNdR07cQG','W6HLqv3cSXy','cSkqwYzWWPpcQCkAWQyN','m8k/BmoxW5NcOdpcQSoxWQK','WRPVF8oyW44Ve2a','k1VdJZ3cLZ4LWRSBjSkzAHaJWQa','ASkBWPm','WOedW7O','DmorWQNcLSkrWPq','W4P9u8kzW5yeu3KoWRCS','WOlcNSoM','W59LWQ/dVLBdTCk+WRPtrCo9WOqV','t0DPW49ajHxcUeLGibmS','WRhcQSoLeW','WPCpW6HDWPxcKa','WRyYgqVdSKJdNapdRhpcVSor','W5BcSdrQ','WO0poG','WPulW75BWPpcVmobW5q','W4b8W57dPw4m','W5NcLSoMCSoCW7L0hmkkh8k3','W6mIWPVcOSk6WRtcV2NcJSoT'];a0v=function(){return h;};return a0v();}((async()=>{const b=a0P,v=JSON[b(0x167,'ECdH')](__next_f[0xf][0x1][b(0x181,')vAv')](0x2))[0x0][0x3]['seriesEpisodeContent'],{seriesId:O,number:H,pageList:Y,scrambleAlgorithmType:z}=v,s=ee(O+':'+H),I=Y;if(I[b(0x16b,'v$K]')]>0x0){downloading_total=I['length'];const S=create_download_icon();S[b(0x18a,'ATCD')](b(0x192,'yG64'),async()=>{const W=b;downloading_current=0x0;const X=I[W(0x174,'#m!n')]((N,w)=>()=>download_encrypted(N,w,s,z));await throttlePromises(X,0x2);});}})());